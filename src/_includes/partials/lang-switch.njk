<div class="language-nav">
  <button
    type="button"
    aria-expanded="false"
    aria-controls="languagenav"
    class="language-nav-button"
  >
    {% include "icons/settings.svg" %}
    <span class="sr-only">{{ meta[page.lang].ariaLabels.optionsButton }}</span>
  </button>
  <nav
    id="languagenav"
    class="language-select-nav"
    role="tablist"
    aria-label="{{ meta[page.lang].ariaLabels.optionsMenu }}"
  >
    {% for language in meta.languages %} {% if loop.first %} {% endif %} {% set
    translatedUrl = "/" + language.code + "/" %} {% set langClass = "lang-" +
    language.code %}

    <!-- set active state-->
    {% set selectedState = "true" if language.code == page.lang else "false" %}
    <!-- start loop -->
    {% for item in collections.all %} {% if item.data.key == key and item.data.page.lang
    == language.code %} {% set translatedUrl = item.url %} {% endif %} {% endfor %}
    <a
      id="lang-{{ language.code }}"
      href="{{ translatedUrl }}"
      rel="alternate"
      hreflang="{{ language.code }}"
      style="--offset: {{ loop.index }}"
      aria-selected="{{ selectedState }}"
    >
      <span lang="{{ language.code }}"> {{ language.long }}</span>
    </a>
    {% if loop.last %} {% endif %} {% endfor %}
  </nav>
</div>
